---
title: TryHackMe Basic Pentesting [CHALLENGE]
author: iamjirho
date: 2024-03-05 00:00:00 +0800
categories: [TryHackMe, Challenge]
tags: [walkthough,write-ups]     # TAG names should always be lowercase
image:
    path: https://tryhackme-images.s3.amazonaws.com/room-icons/99c72676aab814b94e3bc350ba627b71.png
---

## Reconnaissance

```bash
nmap -Pn -n -sV -sC -p- 10.10.41.86 --open
```

```text
Starting Nmap 7.94 ( https://nmap.org ) at 2024-02-11 01:40 EST
Nmap scan report for 10.10.41.86
Host is up (0.38s latency).
Not shown: 58752 closed tcp ports (conn-refused), 6777 filtered tcp ports (no-response)
Some closed ports may be reported as filtered due to --defeat-rst-ratelimit
PORT     STATE SERVICE            VERSION
22/tcp   open  ssh                OpenSSH 7.2p2 Ubuntu 4ubuntu2.4 (Ubuntu Linux; protocol 2.0)
| ssh-hostkey: 
|   2048 db:45:cb:be:4a:8b:71:f8:e9:31:42:ae:ff:f8:45:e4 (RSA)
|   256 09:b9:b9:1c:e0:bf:0e:1c:6f:7f:fe:8e:5f:20:1b:ce (ECDSA)
|_  256 a5:68:2b:22:5f:98:4a:62:21:3d:a2:e2:c5:a9:f7:c2 (ED25519)
80/tcp   open  http               Apache httpd 2.4.18 ((Ubuntu))
|_http-title: Site doesn't have a title (text/html).
|_http-server-header: Apache/2.4.18 (Ubuntu)
139/tcp  open  netbios-ssn        Samba smbd 3.X - 4.X (workgroup: WORKGROUP)
445/tcp  open  etbios-.����@ Samba smbd 4.3.11-Ubuntu (workgroup: WORKGROUP)
8009/tcp open  ajp13              Apache Jserv (Protocol v1.3)
| ajp-methods: 
|_  Supported methods: GET HEAD POST OPTIONS
8080/tcp open  http               Apache Tomcat 9.0.7
|_http-favicon: Apache Tomcat
|_http-title: Apache Tomcat/9.0.7
Service Info: Host: BASIC2; OS: Linux; CPE: cpe:/o:linux:linux_kernel

Host script results:
|_clock-skew: mean: 1h39m59s, deviation: 2h53m12s, median: -1s
| smb2-security-mode: 
|   3:1:1: 
|_    Message signing enabled but not required
| smb2-time: 
|   date: 2024-02-11T06:42:49
|_  start_date: N/A
|_nbstat: NetBIOS name: BASIC2, NetBIOS user: <unknown>, NetBIOS MAC: <unknown> (unknown)
| smb-os-discovery: 
|   OS: Windows 6.1 (Samba 4.3.11-Ubuntu)
|   Computer name: basic2
|   NetBIOS computer name: BASIC2\x00
|   Domain name: \x00
|   FQDN: basic2
|_  System time: 2024-02-11T01:42:48-05:00
| smb-security-mode: 
|   account_used: guest
|   authentication_level: user
|   challenge_response: supported
|_  message_signing: disabled (dangerous, but default)

Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
Nmap done: 1 IP address (1 host up) scanned in 166.15 seconds
```

## To-TRY List
---
- 80 HTTP
    - Web server is running, we can try accessing that
    - Enumerate the directories either manually or automatically.
- 445 SMB
    - We can try using enum4linux to enumerate the SMB share
    - We can try an anonymous login
    - 
- 22 SSH
    - We need some credentials to access this and bruteforcing can take a really long time before the credentials can be cracked. Hence, this is the least of our priorities for pentesting.

## Enumeration
---

### 80 HTTP

Before anything else, let us first check how the website looks like.

![Desktop View](/assets/images/basic-pentesting/website.png){: width="972" height="589" }

Inspecting the source code isn't helpful either.

![Desktop View](/assets/images/basic-pentesting/source-code.png){: width="972" height="589" }

Now let us scan what other directories can this website give us using **`gobuster`**
```bash
gobuster dir -u http://<TARGET_IP> -w /usr/share/dirbuster/wordlists/directory-list-2.3-small.txt -t20
```
**`gobuster dir`**: Initiates Gobuster in directory/file enumeration mode.

**`u http://<TARGET_IP>`**: Specifies the target URL.

**`w /usr/share/dirbuster/wordlists/directory-list-2.3-small.txt`**: Sets the wordlist to be used for brute-forcing common directory and file names. The specified file contains a list of potential paths to check.

**`t20`**: Configures the number of concurrent threads to use during the scan (in this case, 20 threads).

```text
===============================================================
Gobuster v3.6
by OJ Reeves (@TheColonial) & Christian Mehlmauer (@firefart)
===============================================================
[+] Url:                     http://10.10.41.86
[+] Method:                  GET
[+] Threads:                 20
[+] Wordlist:                /usr/share/dirbuster/wordlists/directory-list-2.3-small.txt
[+] Negative Status codes:   404
[+] User Agent:              gobuster/3.6
[+] Timeout:                 10s
===============================================================
Starting gobuster in directory enumeration mode
===============================================================
/development          (Status: 301) [Size: 316] [--> http://10.10.41.86/development/]
```
<!-- markdownlint-capture -->
<!-- markdownlint-disable -->
> We can see the `/development` directory.
{: .prompt-tip }
<!-- markdownlint-restore -->
The **`/development`** directory gave us 301 web response code that indicates a web-redirect that we can be able to access. Now let us try visiting it.

![Desktop View](/assets/images/basic-pentesting/development.png){: width="972" height="589" }

Interesting! The directory contain some plaintexts which could be another clue to the puzzle.

![Desktop View](/assets/images/basic-pentesting/dev.png){: width="972" height="589" }

Reading the dev.txt file, there's a conversation between J and K. The initial message confirms that Apache has been successfully set up, confirming Nmap's detection of Apache running. The subsequent message mentions the setup of SMB as well. The final message hints at a possible software version of 2.5.12.

![Desktop View](/assets/images/basic-pentesting/j.png){: width="972" height="589" }

The j.txt file contains a brief message to the user J, advising them that their password is extremely weak.

<!-- markdownlint-capture -->
<!-- markdownlint-disable -->
> We can infer that having a weak password is somehow a clue for password bruteforcing for SSH. But we do not know who J and K is yet.
{: .prompt-tip }
<!-- markdownlint-restore -->

Perhaps, enumerating  SMB shares would give us additional information for the list of username or clues.

### 445 SMB

```python
smbclient -L $IP
```

```text
Sharename       Type      Comment
	---------       ----      -------
	Anonymous       Disk      
	IPC$            IPC       IPC Service (Samba Server 4.3.11-Ubuntu)
Reconnecting with SMB1 for workgroup listing.

	Server               Comment
	---------            -------

	Workgroup            Master
	---------            -------
	WORKGROUP            BASIC2
```
The command **`smbclient -L $IP`** is used to list the shares available on a remote SMB (Server Message Block) server, where $IP represents the IP address of the server and it seems like we have an anonymous access.

```bash
smbclient \\\\10.10.170.213\\anonymous
```

![Desktop View](/assets/images/basic-pentesting/smb-anon.png){: width="972" height="589" }

Let's get that file to our attacking machine.

```bash
get <FILENAME>
```

Upon viewing.

```python
Announcement to staff:

PLEASE do not upload non-work-related items to this share. I know it's all in fun, but
this is how mistakes happen. (This means you too, Jan!)

-Kay
```






